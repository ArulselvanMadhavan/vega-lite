{
  "$schema": "https://vega.github.io/schema/vega/v5.json",
  "padding": 5,
  "autosize": "pad",
  "config": {
    "text": {
      "font": "Ideal Sans, Avenir Next, Helvetica"
    },
    "title": {
      "font": "Ideal Sans, Avenir Next, Helvetica",
      "fontWeight": 500,
      "fontSize": 17,
      "limit": -1
    },
    "axis": {
      "labelFont": "Ideal Sans, Avenir Next, Helvetica",
      "labelFontSize": 12
    }
  },
  "signals": [
    {
      "name": "child_width",
      "value": 250
    },
    {
      "name": "child_height",
      "value": 380
    },
    {
      "name": "layers",
      "value": [
        "layer_0",
        "layer_1",
        "layer_2",
        "layer_3",
        "layer_4",
        "layer_5",
        "layer_6",
        "layer_7",
        "layer_8",
        "layer_9",
        "layer_10"
      ]
    }
  ],
  "scales": [
    {
      "name": "bias_xscale",
      "type": "linear",
      "domain": {
        "data": "bias_0",
        "field": "value"
      },
      "range": [
        0,
        {
          "signal": "child_width"
        }
      ],
      "nice": true,
      "zero": true
    },
    {
      "name": "bias_yscale",
      "type": "band",
      "range": [
        0,
        {
          "signal": "child_height"
        }
      ],
      "round": true,
      "padding": 0,
      "domain": {
        "signal": "layers"
      }
    },
    {
      "name": "color",
      "type": "ordinal",
      "domain": {
        "fields": [
          {
            "data": "bias_0",
            "field": "layer_name"
          }
        ]
      },
      "range": "category"
    }
  ],
  "data": [
    {
      "name": "bias_0",
      "url": "data/bias.csv",
      "format": {
        "type": "csv"
      },
      "transform": [
        {
          "type": "kde",
          "field": "value",
          "groupby": [
            "layer_name"
          ],
          "extent": [
            -1,
            2
          ],
          "as": [
            "value",
            "density"
          ],
          "steps": 200
        }
      ]
    }
  ],
  "marks": [
    {
      "type": "group",
      "name": "concat_group",
      "layout": {
        "padding": 20,
        "columns": 3,
        "bounds": "full",
        "align": "all"
      },
      "marks": [
        {
          "type": "group",
          "style": "cell",
          "name": "concat_bias",
          "marks": [
            {
              "name": "column_footer",
              "type": "group",
              "role": "column-footer",
              "encode": {
                "update": {
                  "width": {
                    "signal": "child_width"
                  },
                  "height": {
                    "signal": "child_height"
                  }
                }
              },
              "axes": [
                {
                  "scale": "bias_xscale",
                  "orient": "bottom",
                  "grid": false,
                  "title": "bias distribution",
                  "labelFlush": true,
                  "labelOverlap": true,
                  "tickCount": {
                    "signal": "ceil(child_width/40)"
                  },
                  "ticks": true,
                  "zindex": 0
                }
              ]
            },
            
          ],
          "axes": [
            {
              "scale": "bias_xscale",
              "orient": "bottom",
              "domain": false,
              "labels": false,
              "aria": false,
              "maxExtent": 0,
              "minExtent": 0,
              "ticks": false,
              "zindex": 0
            },
            {
              "orient": "left",
              "scale": "bias_yscale",
              "domain": false,
              "ticks": false,
              "encode": {
                "labels": {
                  "update": {
                    "width": {
                      "signal": "child_width"
                    },
                    "dx": {
                      "value": 2
                    },
                    "dy": {
                      "value": 2
                    },
                    "y": {
                      "scale": "bias_yscale",
                      "field": "value",
                      "band": 1
                    },
                    "baseline": {
                      "value": "bottom"
                    }
                  }
                }
              }
            }
          ]
        }
      ]
    }
  ]
}
